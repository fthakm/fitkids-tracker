import supabase from './supabaseClient';
export async function getLeaderboard(limit=10,year=null,month=null){ if(!year||!month){ const {data:latest, error:e}=await supabase.from('student_results').select('year,month').order('year',{ascending:false}).order('month',{ascending:false}).limit(1).single(); if(latest){ year = year || latest['year']; month = month || latest['month']; } } const {data,error}=await supabase.from('student_results').select('student_id,score_avg').eq('year',year).eq('month',month).order('score_avg',{ascending:false}).limit(limit); if(error) throw error; return data; }
